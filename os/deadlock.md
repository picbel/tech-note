데드락 (교착 상태)

데드락 이란?
둘 이상의 프로세스가 다른 프로세스가 점유 하고있는 자원을 서로 기다릴때 무한 대기에 빠지는 상황

### 데드락이 발생하는 조건
- 상호 배제
  - 한번에 프로세스 하나만이 해당 자원을 사용 할수 있다. 사용 중인 자원을 다른 프로세스가 사용하려면 자원이 해제될때까지 기다려야한다.
- 점유 대기
  - 자원을 최소한 하나 보유하고 다른 프로세스에 할당된 자원을 점유하기 위해 대기하는 프로세스가 존재햐야한다.
- 비선점
  - 이미 할당된 자원을 강제로 뺏을수 없다
- 순환 대기
  - 대기 프로세스의 집합이 순환 형태로 자원을 대기하고 있어야한다.

### 데드락 예방
- 자원의 상호 배제 조건 방지 : 한번에 여러 프로세스가 공유 자원을 사용가능하게 한다 \
  하지만 이경우 동기화관련 문제가 생길 수 있다
- 점유 대기 조건 방지 : 프로세스 실행에 필요한 모든 자원을 한꺼번에 요구하고 허용 할때까지 보류한다 \
나중에 또 다른 자원을 점유하기위한 대기 조건을 성립하지 않도록 한다
- 비선점 조건 방지 : 다른 프로세스가 해당 자원에 대한 선점권이 없다면 다른 우선순위의 프로세스에게 선점 할 수 있도록합니다 \ 
- 순한 대기 방지 조건 방지 : 자원을 순환 형태로 대기하지 않도록 일정한 한 쪽 방향으로만 자원을 요구 할 수 있도록 합니다.

### 데드락 탐지 및 회복
먼저 시스템이 데드락 예방이나 회피법을 사용하지 않았을때 데드락이 발생할 수 있으니 여기에서 회복하기우해 데드락을 탐지하고 회복하는 알고리즘을 사용합니다.
- 탐지 기법
  - 최대 자원 요청량, 할당주인 자원, 남은 필요 자원량 등으로 시스템에 데드락 발생 여부를 탐색합니다.
  - 이외 에도 자원 할당 그래프를 통해 탐지가 가능합니다
- 회복 기법
  - 순환 대기에서 벗어나 데드락으로 회복하기 위한 방법
   - **프로세스를 1개 이상 중단하기**
    - 교착 상태에  빠진 모든 프로세스를 중단시키는 방법 : 연산중이던 다른 프로세스들도 일시에 중단되어 부분결과가 폐기되는 부작용 발생가능성이 있음
   - **프로세스를 하나씩 중단 시킬때마다 담지 알고리즘으로 데드락 탐지 후 회복**
    - 매번 탐지 알고리즘을 호출 및 수행해야 함으로 부담이 됨
   - **자원 선점하기**
   - 프로세스에 할당된 자워늘 선점해서 교착상태를 해결할 때까지 그 자원을 다른 프로세스에 할당 해주는 방법

